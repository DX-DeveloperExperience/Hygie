--- # Rules config file
rules:
  - name: commitMessage
    enabled: true
    events:
      - Push
    options:
      regexp: '(feat|fix|docs)(\([a-z]+\))?:\s[^(]*(\(#[1-9][0-9]*(, #[1-9][0-9]*)*\))?$'
    onSuccess:
      - callback: LoggerRunnable
        args:
          type: info
          message: 'pattern match'
      - callback: LoggerRunnable
        args:
          type: info
          message: 'commit will successed'
    onError:
      - callback: LoggerRunnable
        args:
          type: warn
          message: 'pattern does not match, commit name must begin with : "feat|fix|docs"!'
      - callback: LoggerRunnable
        args:
          type: warn
          message: 'commit will fail'

  - name: branchName
    enabled: true
    events:
      - NewBranch
    options:
      regexp: (features|fix)\/.*
    onSuccess:
      - callback: LoggerRunnable
        args:
          type: info
          message: 'pattern match'
    onError:
      - callback: LoggerRunnable
        args:
          type: warn
          message: 'pattern does not match, branch name must begin with : "features|fix"!'
  - name: oneCommitPerPR
    enabled: true
    events:
      - Push
    onSuccess:
      - callback: LoggerRunnable
        args:
          type: info
          message: 'there is only on commit in this PR/MR/Push, ok'
    onError:
      - callback: LoggerRunnable
        args:
          type: warn
          message: 'more than one commit! A notification will be sent to the maintainer.'
      - callback : WebhookRunnable
        args:
          url: 'https://webhook.site/0de43177-4119-448b-bcfe-e2f6a2845ce8'
          data: {
            user: 'bastien terrier',
            content: 'More than one commmit !!'
          }
          config: {
            headers: {
              Authorization: 'token oebfobeofzef'
            }
          }